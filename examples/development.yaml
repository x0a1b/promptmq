# PromptMQ Development Configuration
# Optimized for development and testing

log:
  level: "debug"
  format: "text"        # Human-readable format for development

server:
  bind: "127.0.0.1:1883"       # Localhost only for security
  ws-bind: "127.0.0.1:8080"    # WebSocket on localhost
  read-timeout: "30s"
  write-timeout: "30s"
  daemon: false                 # Run in foreground for development

# MQTT Protocol Settings
mqtt:
  max-packet-size: 65535
  max-client-id-len: 65535
  max-topic-len: 65535
  max-qos: 2
  keep-alive: 60
  max-inflight: 20
  max-connections: 1000        # Lower limit for development
  retain-available: true
  wildcard-available: true
  shared-sub-available: true

# Storage Configuration - Development Optimized
storage:
  data-dir: "./dev-data"       # Separate directory for dev data
  
  # SQLite Configuration - Development friendly
  sqlite:
    cache-size: 10000          # 10k pages (~40MB cache)
    temp-store: "MEMORY"       # Use memory for temp storage
    mmap-size: 134217728       # 128MB memory-mapped I/O
    busy-timeout: 10000        # 10 second timeout
    synchronous: "NORMAL"      # Safe but not too slow
    journal-mode: "WAL"        # WAL mode for consistency
    foreign-keys: true         # Enable for data integrity testing
    
  # Cleanup Settings - Short retention for dev
  cleanup:
    max-message-age: "1h"      # 1 hour retention for development
    check-interval: "10m"      # Check every 10 minutes
    batch-size: 100            # Smaller batches

# Clustering Disabled for Development
cluster:
  enabled: false

# Metrics & Monitoring
metrics:
  enabled: true
  bind: "127.0.0.1:9090"       # Localhost only
  path: "/metrics"